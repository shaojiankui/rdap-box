# RDAP Box

åŸºäº Nuxt 4 æ„å»ºçš„ RDAP åè®®åŸŸåä¿¡æ¯æŸ¥è¯¢å·¥å…·ã€‚å¯¹äºä¸æ”¯æŒ RDAP çš„åŸŸåï¼Œè‡ªåŠ¨é€šè¿‡ WHOIS æŸ¥è¯¢å¹¶è½¬æ¢ä¸º RDAP æ ¼å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ¨ æ”¯æŒ RDAP åè®®æŸ¥è¯¢ï¼ˆ1500+ TLDï¼‰
- ğŸ”„ è‡ªåŠ¨ WHOIS å›é€€å¹¶è½¬æ¢ä¸º RDAP æ ¼å¼
- ğŸŒ™ æš—é»‘ä¸»é¢˜ç•Œé¢
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯
- ğŸš€ åŸºäº Nuxt 4 + TypeScript
- ğŸ¨ ç°ä»£åŒ– UI/UX è®¾è®¡
- ğŸŒ æ”¯æŒ IDN å›½é™…åŒ–åŸŸå
- ğŸ”„ è‡ªåŠ¨æ›´æ–° RDAP æœåŠ¡å™¨åˆ—è¡¨ï¼ˆä» IANAï¼‰
- ğŸ”„ è‡ªåŠ¨æ›´æ–° Public Suffix Listï¼ˆä» Mozillaï¼‰
- ğŸ“Š ç»Ÿä¸€ RDAP æ ¼å¼æ•°æ®è¾“å‡º
- ğŸ“ æŸ¥è¯¢å†å²è®°å½•ï¼ˆæœ€å¤š 20 æ¡ï¼‰
- ğŸ”— æ”¯æŒåŠ¨æ€è·¯ç”± `/åŸŸå` ç›´æ¥æŸ¥è¯¢

## å·²å®ŒæˆåŠŸèƒ½

âœ… **æŸ¥è¯¢åŠŸèƒ½**
- RDAP åè®®æŸ¥è¯¢ï¼ˆæ”¯æŒæ‰€æœ‰ IANA æ³¨å†Œçš„ TLDï¼‰
- WHOIS åè®®æŸ¥è¯¢ï¼ˆè‡ªåŠ¨å›é€€æœºåˆ¶ï¼‰
- WHOIS æ•°æ®è‡ªåŠ¨è½¬æ¢ä¸º RDAP æ ¼å¼
- åŸŸåè§£æï¼ˆè‡ªå®šä¹‰ tldextractï¼Œæ”¯æŒå¤šçº§ TLD å¦‚ com.cnã€com.stï¼‰
- æ”¯æŒå¤šçº§åç¼€æ™ºèƒ½è§£æï¼ˆè§£æåˆ°äºŒçº§åç¼€æŸ¥äºŒçº§ï¼Œè§£æåˆ°ä¸€çº§åç¼€æŸ¥ä¸€çº§ï¼‰

âœ… **å‰ç«¯åŠŸèƒ½**
- æš—é»‘ä¸»é¢˜ç•Œé¢
- å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯ä¼˜åŒ–ï¼‰
- æŸ¥è¯¢å†å²è®°å½•ï¼ˆLocalStorageï¼Œæœ€å¤š 20 æ¡ï¼‰
- åŠ¨æ€è·¯ç”±æ”¯æŒï¼ˆ`/åŸŸå` ç›´æ¥æŸ¥è¯¢ï¼‰
- æŠ˜å å¼ä¿¡æ¯å±•ç¤º
- æ•°æ®æºæ ‡è¯†ï¼ˆRDAP/WHOISï¼‰

âœ… **æ•°æ®ç®¡ç†**
- RDAP æœåŠ¡å™¨åˆ—è¡¨è‡ªåŠ¨æ›´æ–°ï¼ˆ30 å¤©ç¼“å­˜ï¼‰
- Public Suffix List è‡ªåŠ¨æ›´æ–°ï¼ˆ30 å¤©ç¼“å­˜ï¼‰
- æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼ˆç½‘ç»œå¤±è´¥æ—¶ä½¿ç”¨ç¼“å­˜ï¼‰

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Nuxt 4
- **å‰ç«¯**: Vue 3 + TypeScript
- **åç«¯**: Node.js (Nitro)
- **HTTP å®¢æˆ·ç«¯**: Axios
- **åè®®æ”¯æŒ**: RDAP + WHOIS
- **åŸŸåè§£æ**: è‡ªå®šä¹‰ tldextractï¼ˆåŸºäº Public Suffix Listï¼‰
- **æ•°æ®æº**:
  - RDAP æœåŠ¡å™¨åˆ—è¡¨ï¼š<https://data.iana.org/rdap/dns.json>
  - Public Suffix Listï¼š<https://publicsuffix.org/list/public_suffix_list.dat>
  - WHOIS APIï¼š<https://api.tian.hu/whois/>

## é¡¹ç›®ç»“æ„

```
rdap-box/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ query.vue            # æŸ¥è¯¢ç»„ä»¶ï¼ˆä¸»ç•Œé¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ Info.vue             # ä¿¡æ¯å±•ç¤ºç»„ä»¶
â”‚   â”‚   â””â”€â”€ TheHeader.vue        # å¤´éƒ¨ç»„ä»¶
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ index.vue             # é¦–é¡µ
â”‚       â””â”€â”€ [domain].vue         # åŠ¨æ€è·¯ç”±é¡µé¢
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ domain/
â”‚   â”‚       â””â”€â”€ [domain].get.ts  # åŸŸåæŸ¥è¯¢ API
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ LookupService.ts     # æŸ¥è¯¢æœåŠ¡ï¼ˆRDAP + WHOISï¼‰
â”‚   â”œâ”€â”€ data/                     # æ•°æ®æ–‡ä»¶ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
â”‚   â”‚   â”œâ”€â”€ rdap-servers-iana.json
â”‚   â”‚   â”œâ”€â”€ rdap-servers-extra.json
â”‚   â”‚   â””â”€â”€ public_suffix_list.dat
â”‚   â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ rdapClient.ts        # RDAP å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ rdapServers.ts       # RDAP æœåŠ¡å™¨åˆ—è¡¨ç®¡ç†ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
â”‚       â”œâ”€â”€ whoisClient.ts       # WHOIS å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ domainUtils.ts       # åŸŸåè§£æå·¥å…·
â”‚       â””â”€â”€ tldextract.ts        # TLD æå–å·¥å…·ï¼ˆåŸºäº PSLï¼‰
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”œâ”€â”€ nuxt.config.ts               # Nuxt é…ç½®
â””â”€â”€ package.json                 # ä¾èµ–é…ç½®
```

## å®‰è£…ä¸è¿è¡Œ

### å®‰è£…ä¾èµ–

```bash
yarn install
```

### å¼€å‘æ¨¡å¼

```bash
yarn dev
```

è®¿é—® <http://localhost:3000>

### ç”Ÿäº§æ„å»º

```bash
yarn build
```

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

```bash
yarn preview
```

## API æ¥å£

### åŸŸåæŸ¥è¯¢æ¥å£

**GET** `/domain/:domain`

è‡ªåŠ¨é€‰æ‹© RDAP æˆ– WHOIS æŸ¥è¯¢ï¼Œç›´æ¥è¿”å›æ ‡å‡† RDAP æ ¼å¼æ•°æ®ï¼ˆæ— é¢å¤–åŒ…è£…ï¼‰ã€‚

**è¯·æ±‚å‚æ•°**:

- `domain` (è·¯å¾„å‚æ•°): è¦æŸ¥è¯¢çš„åŸŸåï¼Œæ”¯æŒ URL ç¼–ç 

**ç¤ºä¾‹**:

- `GET /domain/example.com`
- `GET /domain/example.cn`
- `GET /domain/example.com.cn`
- `GET /domain/example%2Ecom` (URL ç¼–ç )

**æˆåŠŸå“åº”** (200 OK):

ç›´æ¥è¿”å›æ ‡å‡† RDAP JSON æ ¼å¼æ•°æ®ï¼š

```json
{
  "objectClassName": "domain",
  "handle": "example.com",
  "ldhName": "example.com",
  "unicodeName": "example.com",
  "status": ["clientTransferProhibited"],
  "nameservers": [
    {
      "objectClassName": "nameserver",
      "ldhName": "ns1.example.com"
    }
  ],
  "events": [
    {
      "eventAction": "registration",
      "eventDate": "2023-01-01T00:00:00Z"
    }
  ],
  "entities": [...],
  "links": [...],
  "remarks": [
    {
      "title": "Data Source",
      "description": ["This data was retrieved via RDAP protocol"]
    }
  ]
}
```

**é”™è¯¯å“åº”**:

- **400 Bad Request**: åŸŸåå‚æ•°æ— æ•ˆæˆ–ç¼ºå¤±

  ```json
  {
    "statusCode": 400,
    "statusMessage": "Bad Request",
    "message": "Domain parameter is required"
  }
  ```

- **500 Internal Server Error**: æŸ¥è¯¢å¤±è´¥ï¼ˆRDAP å’Œ WHOIS éƒ½å¤±è´¥ï¼‰

  ```json
  {
    "statusCode": 500,
    "statusMessage": "Internal Server Error",
    "message": "Both RDAP and WHOIS failed. RDAP: ..., WHOIS: ..."
  }
  ```

**æ•°æ®æ¥æºæ ‡è¯†**:

- **RDAP æ•°æ®**: `remarks` æ•°ç»„ä¸­åŒ…å« `{"title": "Data Source", "description": ["This data was retrieved via RDAP protocol"]}`
- **WHOIS æ•°æ®**: `remarks` æ•°ç»„ä¸­åŒ…å« `{"title": "Data Source", "description": ["This data was converted from WHOIS response to RDAP format"]}`

## å·¥ä½œåŸç†

1. **ç”¨æˆ·è¾“å…¥åŸŸå** â†’ ç³»ç»Ÿä½¿ç”¨è‡ªå®šä¹‰ tldextract è§£æåŸŸåå’Œåç¼€ï¼ˆåŸºäº Public Suffix Listï¼‰
2. **æ™ºèƒ½åç¼€è§£æ**ï¼š
   - å¤šçº§åç¼€ï¼ˆå¦‚ `com.cn`ï¼‰ä¼˜å…ˆæŸ¥æ‰¾ä¸€çº§åç¼€ï¼ˆ`cn`ï¼‰çš„æœåŠ¡å™¨
   - å¦‚æœä¸€çº§åç¼€æœåŠ¡å™¨ä¸å­˜åœ¨ï¼Œå›é€€åˆ°å®Œæ•´åç¼€ï¼ˆ`com.cn`ï¼‰
   - æ”¯æŒä¸‰çº§åŠä»¥ä¸Šåç¼€çš„æ™ºèƒ½è§£æ
3. **å°è¯• RDAP æŸ¥è¯¢** â†’ ä»è‡ªåŠ¨æ›´æ–°çš„ RDAP æœåŠ¡å™¨åˆ—è¡¨ä¸­æŸ¥æ‰¾å¯¹åº”æœåŠ¡å™¨å¹¶è·å–æ•°æ®
4. **å¦‚æœ RDAP å¤±è´¥** â†’ è‡ªåŠ¨å›é€€åˆ° WHOIS æŸ¥è¯¢ï¼ˆé€šè¿‡ç¬¬ä¸‰æ–¹ APIï¼‰
5. **WHOIS è½¬æ¢** â†’ WHOIS æ•°æ®è‡ªåŠ¨è½¬æ¢ä¸ºæ ‡å‡† RDAP æ ¼å¼
6. **è¿”å›ç»Ÿä¸€æ ¼å¼** â†’ æ‰€æœ‰æ•°æ®ä»¥æ ‡å‡† RDAP JSON æ ¼å¼è¿”å›

## æ•°æ®è‡ªåŠ¨æ›´æ–°

é¡¹ç›®ä¼šè‡ªåŠ¨ä»å®˜æ–¹æºä¸‹è½½å’Œæ›´æ–°æ•°æ®ï¼š

- **RDAP æœåŠ¡å™¨åˆ—è¡¨**ï¼šä» `https://data.iana.org/rdap/dns.json` ä¸‹è½½ï¼Œ30 å¤©ç¼“å­˜
- **Public Suffix List**ï¼šä» `https://publicsuffix.org/list/public_suffix_list.dat` ä¸‹è½½ï¼Œ30 å¤©ç¼“å­˜

é¦–æ¬¡è¿è¡Œæˆ–ç¼“å­˜è¿‡æœŸæ—¶è‡ªåŠ¨æ›´æ–°ï¼Œç½‘ç»œå¤±è´¥æ—¶ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚

## ä½¿ç”¨æ–¹å¼

### Web ç•Œé¢

1. è®¿é—®é¦–é¡µï¼Œè¾“å…¥åŸŸåæŸ¥è¯¢
2. æˆ–ç›´æ¥è®¿é—® `/åŸŸå` è·¯ç”±ï¼ˆå¦‚ `/example.com`ï¼‰è¿›è¡ŒæŸ¥è¯¢
3. æŸ¥çœ‹æŸ¥è¯¢å†å²ï¼Œå¿«é€Ÿé‡æ–°æŸ¥è¯¢

### API è°ƒç”¨

```bash
# æŸ¥è¯¢åŸŸå
curl http://localhost:3003/domain/example.com

# æŸ¥è¯¢ IDN åŸŸå
curl http://localhost:3003/domain/ä¾‹å­.ä¸­å›½
```

## æ•°æ®æº

- **RDAP æœåŠ¡å™¨åˆ—è¡¨**: IANA å®˜æ–¹æ•°æ®ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
- **Public Suffix List**: Mozilla ç»´æŠ¤ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
- **WHOIS æŸ¥è¯¢**: é€šè¿‡ç¬¬ä¸‰æ–¹ APIï¼ˆtian.huï¼‰

## æµè§ˆå™¨æ”¯æŒ

- Chrome/Edge (æœ€æ–°ç‰ˆ)
- Firefox (æœ€æ–°ç‰ˆ)
- Safari (æœ€æ–°ç‰ˆ)

## è®¸å¯è¯

MIT License

## å‚è€ƒé¡¹ç›®

æœ¬é¡¹ç›®å‚è€ƒäº† [whois-domain-lookup](https://github.com/OWNER/whois-domain-lookup) çš„å®ç°é€»è¾‘ã€‚
